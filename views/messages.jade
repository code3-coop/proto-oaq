//- Copyright (C) 2012  CODE3 Cooperative de solidarite
//- 
//- This program is free software: you can redistribute it and/or modify
//- it under the terms of the GNU General Public License as published by
//- the Free Software Foundation, either version 3 of the License, or
//- (at your option) any later version.
//- 
//- This program is distributed in the hope that it will be useful,
//- but WITHOUT ANY WARRANTY; without even the implied warranty of
//- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//- GNU General Public License for more details.
//- 
//- You should have received a copy of the GNU General Public License
//- along with this program.  If not, see <http://www.gnu.org/licenses/>.

.container
  .row
    .span6
      h2 Messages
    .span6
      button.btn.btn-success.pull-right.x-mark-all-read
        i.icon-ok.icon-white
        |  Tous marquer comme lu
  .row
    .span12
      hr
  each message in messages
    .row(style="opacity:#{opacityFor(message)}")
      .span10
          i.icon-envelope
          strong &nbsp;#{fromNow(message.dateSent)} #{message.author} a Ã©crit
        - if (message.isRead === 'false')
          .span2
            button.btn.btn-mini.pull-right.x-mark-read(data-id="#{message._id}") marquer comme lu
    .row(style="margin-top:.5em; opacity:#{opacityFor(message)}")
      .span1
        img.x-message-profile-pic.pull-left(src="http://www.gravatar.com/avatar/76f0d24ad87d65debc82aed00720f1cr?s=36&d=mm")
      .span9
        b!= parseDossierRefs(message.subject)
        p #{message.body}
    .row
      .span12
        hr

!= js('messages-app')
